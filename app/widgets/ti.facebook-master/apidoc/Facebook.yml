---
name: Modules.Facebook
summary: |
    Add-on Facebook module.
description: |
    The Facebook module is used for connecting your application with
    Facebook. This module supports the following features:

    * Logging in to Facebook and authorizing your application with either the
      [Login button](Modules.Facebook.LoginButton) or programatically.

    * Making requests through the Facebook Graph API using the
      [requestWithGraphPath()](Modules.Facebook.requestWithGraphPath) method.

    * Sharing content using Facebook dialogs or the [Like button](Modules.Facebook.LikeButton).

    **Using Ti.Facebook with iOS 10 and Xcode 8**
    To log in using Facebook on iOS Simulator, you now must include an entitlements file that enables Keychain
    Sharing Capabilities. While the entitlements file is not necessary for device build (it is self-generated),
    it won't affect anything in your build. To do so, create a `/platform/ios/name.entitlements` file (replace
    name with the name element in tiapp.xml) with this content:

            <?xml version="1.0" encoding="UTF-8"?>
            <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
            <plist version="1.0">
            <dict>
            	<key>keychain-access-groups</key>
            	<array>
                    <!-- APP_ID same as the id value in the tiapp.xml file -->
                    <string>$(AppIdentifierPrefix)APP_ID</string>
            	</array>
            </dict>
            </plist>

    **Note:** As of April 30th, 2015, Facebook no longer supports version 1.0 of their API, which
    includes the FQL and REST APIs.  Only the Graph APIs will be supported.

    **Migration from the Facebook module v4.x to v5.x**

    * **dialog() method** -- [presentWebShareDialog()](Modules.Facebook.presentWebShareDialog) is
      deprecated and removed. The module will auto determine if you have a native Facebook App installed.
      [canPresentShareDialog()](Modules.Facebook.canPresentShareDialog) is also deprecated and removed.
      For more details, see 'Share Dialogs' and 'Request Dialogs' below.

    * **presentShareDialog() method** -- 'name' parameter is deprecated and replaced with 'title'.
      'caption' parameter is deprecated and removed.

    * **presentSendRequestDialog() method** -- 'to' parameter is deprecated and replaced with 'recipients'.
      There are a few new parameters as well, for more details,
      see [presentSendRequestDialog()](Modules.Facebook.presentSendRequestDialog)

    The following APIs were removed due to changes in the native Facebook SDKs and
    removal of the Facebook v1.0 REST APIs:

    * **appid property** -- The Facebook application ID can no longer be set programmatically
      in the application.  Set the Facebook application ID in the `tiapp.xml` file.
      For more details, see 'Getting Started' below for more details.
    **Migration from the Facebook module v3.x to v4.x**

    The following APIs were removed due to changes in the native Facebook SDKs and
    removal of the Facebook v1.0 REST APIs:

    * **appid property** -- The Facebook application ID can no longer be set programmatically
      in the application.  Set the Facebook application ID in the `tiapp.xml` file.
      For more details, see 'Getting Started' below for more details.

    * **dialog() method** -- Use either
      [presentSendRequestDialog()](Modules.Facebook.presentSendRequestDialog),
      [presentInviteDialog()](Modules.Facebook.presentInviteDialog),
      [presentMessengerDialog()](Modules.Facebook.presentMessengerDialog),
      [presentShareDialog()](Modules.Facebook.presentShareDialog) or
      [presentWebShareDialog()](Modules.Facebook.presentWebShareDialog).
      For more details, see 'Share Dialogs' and 'Request Dialogs' below.

    * **forceDialogAuth property** -- On Android, you can force dialog authorization with the
      [LoginButton.sessionLoginBehavior](Modules.Facebook.LoginButton.sessionLoginBehavior) property.

    * **publishInstall() method** -- The underlying Facebook API has been deprecated and
      is now handled automatically by the module.

    * **request() method** -- Due to the removal of the Facebook v1.0 APIs,
      all applications should call the Graph APIs instead. If you make any REST API calls
      with the `request()` method, transition to the Graph APIs and use the
      [requestWithGraphPath()](Modules.Facebook.requestWithGraphPath) method.

    * **reauthorize() method** -- To request additional Facebook permissions once the
      user authorizes the application, use either the
      [requestNewReadPermissions()](Modules.Facebook.requestNewReadPermissions) or
      [requestNewPublishPermissions()](Modules.Facebook.requestNewPublishPermissions).
      For more details, see "Manage Read and Write Permissions" below.

    * **LoginButton style property** -- Facebook redesigned its Login button and the
      style can no longer be changed.

    ## Getting Started

    To use the Facebook module, you need a Facebook application. To create a Facebook App,
    go to the Facebook Developer App: [developers.facebook.com/apps](https://developers.facebook.com/apps).

    -   Edit the `modules` section of your tiapp.xml file to include this module:

            <modules>
                <!-- Add the appropriate line(s) to your modules section -->
                <module platform="android">facebook</module>
                <module platform="iphone">facebook</module>
            </modules>

    -    Instantiate the module with the `require('facebook')` method, then make subsequent API calls
         with the new Facebook object.

             var fb = require('facebook');
             fb.permissions = [FACEBOOK_APP_PERMISSIONS];
             fb.initialize();
             fb.authorize();

    ### Additional iOS Setup Steps

    For the iOS platform, in the `ios plist dict` section of your `tiapp.xml` file, add the following keys:

      * `FacebookAppID` key with your Facebook App ID as the string value
      * `FacebookDisplayName` key with your Facebook App name (the one from `developer.facebook.com`) as the string value
      * `CFBundleURLTypes` key with a single-element array containing a dict as the value, where the dict contains:
          * `CFBundleURLName` key with the application app ID (same value as the `id` in the `tiapp.xml` file) as the string value
          * `CFBundleURLSchemes` key with a single-element array containing the Facebook App ID prefixed with `fb` as a string value

    For example:

            <ti:app>
                <ios>
                    <plist>
                        <dict>
                            <key>CFBundleURLTypes</key>
                            <array>
                                <dict>
                                    <key>CFBundleURLName</key>
                                    <!-- Application ID same as the id value in the tiapp.xml file -->
                                    <string>APP_ID</string>
                                    <key>CFBundleURLSchemes</key>
                                    <array>
                                        <!-- Prefix the Facebook App ID with 'fb' -->
                                        <string>fbFACEBOOK_APP_ID</string>
                                    </array>
                                </dict>
                            </array>
                            <key>FacebookAppID</key>
                            <!-- Facebook App ID -->
                            <string>FACEBOOK_APP_ID</string>
                            <key>FacebookDisplayName</key>
                            <!-- Facebook App Name from developer.facebook.com -->
                            <string>FACEBOOK_APP_NAME</string>
                        </dict>
                    </plist>
                </ios>
            </ti:app>

    To enable the use of Facebook dialogs (e.g., Login, Share), you also need to include the following key and values in `tiapp.xml`
    to handle the switching in and out of your app:

        <key>LSApplicationQueriesSchemes</key>
        <array>
            <string>fbapi</string>
            <string>fb-messenger-api</string>
            <string>fbauth2</string>
            <string>fbshareextension</string>
        </array>

    If you are using the older Ti.Facebook Module 4.0.5 and wish to support iOS9, you will instead need to include the following key
    and values in `tiapp.xml` to handle the switching in and out of your app:

        <key>LSApplicationQueriesSchemes</key>
        <array>
            <string>fbapi</string>
            <string>fbapi20130214</string>
            <string>fbapi20130410</string>
            <string>fbapi20130702</string>
            <string>fbapi20131010</string>
            <string>fbapi20131219</string>
            <string>fbapi20140410</string>
            <string>fbapi20140116</string>
            <string>fbapi20150313</string>
            <string>fbapi20150629</string>
            <string>fbauth</string>
            <string>fbauth2</string>
            <string>fb-messenger-api20140430</string>
        </array>

    For iOS9 and titanium 5.0.0.GA and above, App Transport Security is disabled by default.
    If you choose to enable it, you have to set the following keys and values in `tiapp.xml` <ios> section for facebook module:

        <key>NSAppTransportSecurity</key>
        <dict>
            <key>NSExceptionDomains</key>
                <dict>
                    <key>facebook.com</key>
                        <dict>
                            <key>NSIncludesSubdomains</key> 
                            <true/>
                            <key>NSExceptionRequiresForwardSecrecy</key> 
                            <false/>
                        </dict>
                    <key>fbcdn.net</key>
                        <dict>
                            <key>NSIncludesSubdomains</key> 
                            <true/>
                            <key>NSExceptionRequiresForwardSecrecy</key>  
                            <false/>
                        </dict>
                    <key>akamaihd.net</key>
                        <dict>
                            <key>NSIncludesSubdomains</key> 
                            <true/>
                            <key>NSExceptionRequiresForwardSecrecy</key> 
                            <false/>
                        </dict>
                </dict>
        </dict>

    ### Additional Android Setup Steps

    Since Facebook module v4.0.0, for the Android platform, you need to:

      * Add the Facebook Login activity to the Android manifest
      * Add the Facebook App ID to the Android resources `string.xml` file
      * Create a Facebook proxy and associate it with the current active activity

    **Modify the Android Manifest**

    Add the Facebook Login activity to the `android manifest` section of your `tiapp.xml` file.
    You may need to add the `manifest` and `application` elements.

        <ti:app>
            <android xmlns:android="http://schemas.android.com/apk/res/android">
                <manifest>
                    <application>
                        <activity android:name="com.facebook.FacebookActivity" 
                                  android:theme="@android:style/Theme.Translucent.NoTitleBar" 
                                  android:label="YourAppName" 
                                  android:configChanges="keyboard|keyboardHidden|screenLayout|screenSize|orientation" />
                        <meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/facebook_app_id"/>
                    </application>
                </manifest>
            </android>
        <ti:app>

    **Add the Facebook App ID to Android Resources**

    Add a string element to the `/platform/android/res/values/strings.xml` file with the `name`
    attribute set to `facebook_app_id` and the node text set to your Facebook App ID. Create the
    file if it does not exist.

        <resources>
            <string name="facebook_app_id">FACEBOOK_APP_ID</string>
        </resources>

    **Create a Facebook Proxy**

    Use the [createActivityWorker()](Modules.Facebook.createActivityWorker) method to create a
    Facebook proxy. Pass the method a dictionary with the `lifecycleContainer` property set to
    the current active instance of a standalone Window (window not contained in a tab group) or TabGroup.
    Create the proxy before calling the `open()` method on either the window or tab group.

    The Facebook module needs to hook into the lifecycle events of the current active activity
    in order to synchronize its state between various activities in the application, for example,
    to update the label of the Login button when the user logs in or out of Facebook.

    Attach the proxy to the Window or TabGroup object, so it does not get garbage collected.

        win.fbProxy = fb.createActivityWorker({lifecycleContainer: win});

    ## Module API Usage

    ### Facebook Login and Authorization

    To use Facebook, a user must logged into Facebook and explicitly authorize the application to
    perform certain actions, such as accessing profile information or posting status messages.

    There are two ways to initiate the login process:

    * Call [authorize](Modules.Facebook.authorize) to prompt the user to login and authorize
      the application. Before calling this method, set the <Modules.Facebook.permissions> property
      if additional permissions are needed.

    * Create a Facebook [LoginButton](Modules.Facebook.LoginButton) to allow the user to
      log in if desired. You can add either read permissions or write permissions,
      otherwise the default is to request for the `public_profile` permission.
      Note that Facebook does not support setting both `readPermissions` and `publishPermissions`
      properties at the same time when using the LoginButton.

    Which approach you take depends on your UI and how central Facebook is to your
    application.

    ### Manage Read and Write Permissions

    In order to read or write content to a user's Facebook page, you need to request permission from
    the user.  You can either request permissions when the user authorizes your application or
    request permissions on the fly.

    Before the user logs in and authorizes the application, you can request permissions for the
    application to use by either:

      * Setting the <Modules.Facebook.permissions> property if you are using `authorize()` method to
        have the user login and authorize the application.
      * Setting either the [readPermissions](Modules.Facebook.LoginButton.readPermissions) or
        [publishPermissions](Modules.Facebook.LoginButton.publishPermissions) on an instance of a LoginButton.
        Do not set both properties or the application will throw an error.

    For a complete list of permissions, see the [official Facebook Permissions Reference](https://developers.facebook.com/docs/facebook-login/permissions/)

    **Refresh Application Permissions**

    Since the user can selectively turn application permissions on and off from their Facebook
    page, the application may need to refresh its granted permissions.

    To refresh the application's permissions, call the
    [refreshPermissionsFromServer()](Modules.Facebook.refreshPermissionsFromServer) method, then
    listen for the <Modules.Facebook.tokenUpdated> event to be notified when permissions are updated.

        fb.addEventListener('tokenUpdated', function(e) {
            Ti.API.info('Updated permissions: ' + JSON.stringify(fb.permissions));
        });
        fb.refreshPermissionsFromServer();


    **Request Additional Read Permissions**

    To request additional read permissions once the user authorizes your application, use the
    [requestNewReadPermissions()](Modules.Facebook.requestNewReadPermissions) method.

    Check the <Modules.Facebook.permissions> property to make sure the user accepted the request for
    additional permissions.

        var fb = require('facebook');
        fb.requestNewReadPermissions(['read_stream','user_hometown', etc...], function(e) {
            if (e.success) {
                fb.requestWithGraphPath(...);
            } else if (e.cancelled) {
                ....
            } else {
                Ti.API.debug('Failed authorization due to: ' + e.error);
            }
        });

    **Request Additional Write Permissions**

    To request additional write permissions once the user authorizes your application, use the
    [requestNewPublishPermissions()](Modules.Facebook.requestNewPublishPermissions) method.
    Note that in addition to passing the permissions to request, you need to also pass an `AUDIENCE_*`
    constant to indicate the default audience when positing content.

    Check the <Modules.Facebook.permissions> property to make sure the user accepted the request for
    additional permissions.

        var fb = require('facebook');
        fb.requestNewPublishPermissions(['read_stream','user_hometown', etc...], fb.AUDIENCE_FRIENDS, function(e) {
            if (e.success) {
                fb.requestWithGraphPath(...);
            } else if (e.cancelled) {
            ....
            } else {
                Ti.API.debug('Failed authorization due to: ' + e.error);
            }
        });


    ### Share Dialogs

    The Share dialog prompts a person to publish an individual story or an Open Graph story
    to their timeline. This does not require the user to authorize your app or any extended permissions,
    so it is the easiest way to enable sharing.

    The Share dialog uses the Facebook apps interface, so the Facebook app needs to be installed.  If
    the Facebook app is not installed, the application can use the Feed dialog that presents the
    dialog in a web-based view as a back up if the Share dialog is not available.

    To present a Share dialog to a user, use the <Modules.Facebook.canPresentShareDialog> property to
    check if the application can use the Share dialog. If the application supports the Share dialog,
    call the [presentShareDialog()](Modules.Facebook.presentShareDialog) to present it, else call the
    [presentWebShareDialog()](Modules.Facebook.presentWebShareDialog) method to present the Feed dialog.

    Pass either method parameters you want to add to the post, such as a link or picture, or to
    share the user's status, do not pass any parameters to the methods.

    To monitor if the share request succeeded or not, listen to the <Modules.Facebook.shareCompleted>
    event.

            fb.addEventListener('shareCompleted', function (e) {
                if (e.success) {
                    Ti.API.info('Share request succeeded.');
                } else {
                    Ti.API.warn('Failed to share.');
                }
            });

            fb.presentShareDialog({
                link: 'https://appcelerator.com/',
                title: 'great product',
                description: 'Titanium is a great product',
                picture: 'http://www.appcelerator.com/wp-content/uploads/scale_triangle1.png'
            });


    For details on the Share dialog, see the
    [official Facebook Share Dialogs documentation](https://developers.facebook.com/docs/sharing/reference/share-dialog).

    ### Requests Dialog

    A request dialog allows a user to invite another user to use your application.
    Facebook will send a private message to the recipient.
    The typical use case is to invite another user to play a game.
    If you want to invite people to your application which is not a game, use the
    [presentInviteDialog()](Modules.Facebook.presentInviteDialog) method instead.

    To send a request to a user, call the
    [presentSendRequestDialog()](Modules.Facebook.presentSendRequestDialog) method and pass the
    method a dictionary with the `message` property set the message you want to send the invited user.
    Optional: You can set the `title` property with a title string. You can also set the `data` property
    with a dictionary of custom parameters. If you want to preselect users to send invite to, you can set
    the `to` property with string of values that are facebook ids seperated by comma.

    To monitor if the request succeeded or not, listen to the <Modules.Facebook.requestDialogCompleted> event.


            fb.addEventListener('requestDialogCompleted', function (e) {
                if (e.success) {
                    Ti.API.info('request succeeded.');
                } else {
                    Ti.API.warn('Failed to share.');
                }
            });

            fb.presentSendRequestDialog({
                message: 'Go to https://appcelerator.com/',
                title: 'Invitation to Appcelerator',
                recipients: ['123456789', '123456788'],
                data: {
                    badge_of_awesomeness: '1',
                    social_karma: '5'
                }
            });

    For details on request dialogs see the
    [official Facebook Request Dialogs documentation](https://developers.facebook.com/docs/games/requests/v2.2).

    ### Messenger Dialog

    A messenger dialog allows a user to send content to the Facebook Messenger using your application.

    To send a message to a user, call the [presentMessengerDialog()](Modules.Facebook.presentMessengerDialog) method
    and pass the method a dictionary with the optional values "title", "description", "link", "to", "placeID"
    and "referal".

            fb.presentMessengerDialog({
                title: "Appcelerator Titanium rocks!", // The title of the link
                description: "Shared from my Titanium application", // The description of the link
                link: "https://appcelerator.com", // The link you want to share
                referal: "ti_app", // The referal to be added as a suffix to your link
                placeID: "my_id", // The ID for a place to tag with this content
                to: [] // List of IDs for taggable people to tag with this content
            });

    For details on dialog see the
    [official Facebook Messenger Dialogs documentation](https://developers.facebook.com/docs/messenger).

    ### Messenger Button

    The Messenger button provides a quick mechanism for users to share content to the Facebook Messenger.
    A click on the button can share the content to multiple users.

    To create a Messenger button, call the [createMessengerButton()](Modules.Facebook.createMessengerButton)
    method and pass the "mode" and "style" properties:

        var messengerButton = fb.createMessengerButton({
            mode: fb.MESSENGER_BUTTON_MODE_RECTANGULAR
            style: fb.MESSENGER_BUTTON_STYLE_BLUE
        });
        win.add(messengerButton);

    For more information, see the [MessengerButton API reference](Modules.Facebook.MessengerButton).

    ### Like Button

    The Like button provides a quick mechanism for users to share content. A click on the button
    will share the content on the user's Facebook page.

    To create a Like button, call the [createLikeButton()](Modules.Facebook.createLikeButton) method
    and pass it a dictionary with the `objectID` assigned to either a URL or Open Graph object ID
    you want to share. Add the button instance to a view to display it.

        var likeButton = fb.createLikeButton({
            objectID: "https://www.facebook.com/appcelerator"
        });
        win.add(likeButton);

    For more information, see the [LikeButton API reference](Modules.Facebook.LikeButton).

extends: Titanium.Module
since: "3.1.0"
platforms: [android, iphone, ipad]
methods:
  - name: authorize
    summary: |
        Prompts the user to log in (if not already logged in) and authorize your application.
        You can also use [LoginButton](Modules.Facebook.LoginButton) to log in.
    description: |
        Be sure to set your required [permissions](Modules.Facebook.permissions) before
        calling `authorize`.

        A [login](Modules.Facebook.login) event is generated to indicate a successful or
        unsuccessful login attempt.

        #### iOS Platform Notes

        On iOS, do not request any write permissions before calling this method.  Use the
        [requestNewPublishPermissions()](Modules.Facebook.requestNewPublishPermissions)
        to request write permissions once the user authorizes the application.

        #### Prior to Release 4.0.0

        Set the [appid](Modules.Facebook.appid) property as well as the `permissions` property
        before calling `authorize()`.

  - name: createActivityWorker
    summary: |
        Creates a Facebook proxy to hook into the activity of either a standalone <Titanium.UI.Window>
        (not inside a TabGroup) or <Titanium.UI.TabGroup>.
    description: |
        Set the `lifecycleContainer` property in the dictionary passed to the method to either
        the current active  instance of a <Titanium.UI.Window> or <Titanium.UI.TabGroup> in order to monitor the activity's
        lifecycle events, required by Facebook to synchronize its state between various
        activities in the application.

        The proxy object must be created before calling the `open()` method on the associated Window
        or TabGroup.
    parameters:
      - name: parameters
        summary: |
            Properties to set on a new object, including any defined by <Titanium.Proxy> except
            those marked not-creation or read-only.

            **Note:** You must set the `lifecycleContainer` property.
        type: Dictionary<Titanium.Proxy>
    returns:
        type: Titanium.Proxy
    since: 4.0.0
    platforms: [android]

  - name: dialog
    summary: Opens a supported Facebook dialog.
    deprecated:
        since: 4.0.0
        removed: 4.0.0
    description: |
        For a list of dialogs, parameters, and response formats, see the
        [official documentation for Facebook Dialogs](https://developers.facebook.com/docs/javascript/reference/FB.ui).

        The callback is invoked when the dialog is closed, either because the user
        approved the action, or canceled the dialog.
    parameters:
      - name: action
        summary: Specifies which dialog to show, such as "feed".
        type: String

      - name: params
        summary: |
            A dictionary object for pre-filling some of the dialog's fields.
        type: Object

      - name: callback
        summary: Callback to invoke  when the user completes or cancels the dialog.
        type: Callback<FacebookDialogResponse>

  - name: initialize
    summary: |
        Loads a cached Facebook session if available, then fires the `login` event.
    description: |
        Be sure to set your [login](Modules.Facebook.login) and [logout](Modules.Facebook.logout)
        event listeners before calling `initialize`.
    deprecated:
        since: 5.0.0
    parameters:
      - name: timeout
        summary: Sets initialize timeout in milliseconds.
        type: Number
    since: 4.0.0

  - name: logCustomEvent
    summary: Logs a custom event to Facebook.
    description: |
        **From the Facebook API Reference:**

        Events are not sent immediately when logged. They're cached and flushed out to the Facebook servers
        in a number of situations:

          * when an event count threshold is passed (currently 100 logged events).
          * when a time threshold is passed (currently 15 seconds).
          * when an app has gone to background and is then brought back to the foreground.

        Some things to note when logging events:

          * There is a limit on the number of unique event names an app can use, on the order of 300.
          * Event names must be between 2 and 40 characters and must consist of alphanumeric
            characters, `_`, `-` or spaces.
    parameters:
      - name: event
        summary: Arbitrary string to log as an event.
        type: String
      - name: valueToSum
        summary: |
            An arbitrary number that can represent any value (e.g., a price or a quantity). 
            When reported, all of the valueToSum properties will be summed together in Facebook Analytics for Apps.
        type: Number
        optional: true
        since: "5.4.0"
      - name: params
        summary: |
            A dictionary object containing optional parameters.
        type: Object
        optional: true
        since: "5.4.0"
    since: "4.0.0"
    
  - name: logPurchase
    summary:  Log a purchase of the specified amount, in the specified currency.
    parameters:
      - name: amount
        summary: |
            Purchase amount to be logged, as expressed in the specified currency.
            This value will be rounded to the thousandths place (e.g., 12.34567 becomes 12.346).
        type: Number
      - name: currency
        summary: |
            Currency, is denoted as, e.g. "USD", "EUR", "GBP".  See ISO-4217 for specific values.
        type: String
    since: "5.2.0"

  - name: logout
    summary: Clears the OAuth `accessToken` and logs out the user.

  - name: publishInstall
    deprecated:
        since: 4.0.0
        removed: 4.0.0
    summary: |
        Manually publish an attributed install to the facebook graph.
    description: |
        Be sure to set your [appid](Modules.Facebook.appid) before calling `publishInstall`.
    since: "3.4.1"

  - name: presentInviteDialog
    summary: |
        Opens a supported Facebook Invite dialog from the Facebook App.
    description: |
        To monitor if the share request succeeded or not, listen to the
        <Modules.Facebook.shareCompleted> event.
    parameters:
      - name: params
        summary: |
            A dictionary object containing required and optional parameters.
        type: InviteDialogParams
    since: "5.4.0"
    platforms: [iphone, ipad, android]

  - name: presentShareDialog
    summary: |
        Opens a supported Facebook Share dialog from the Facebook App.
    description: |
        Be sure to check if the device can support this method by calling [getCanPresentShareDialog](Modules.Facebook.getCanPresentShareDialog)
        before using this method. If true, you can use this method. If false, the Facebook application
        is probably not installed in the device. In this case, use [presentWebShareDialog](Modules.Facebook.presentWebShareDialog)
        instead.

        Listen for the <Modules.Facebook.shareCompleted> to be notified if the attempt was
        successful or not.
    parameters:
      - name: params
        summary: |
            A dictionary object containing optional parameters.
        type: ShareDialogParams
    since: 4.0.0

  - name: presentMessengerDialog
    summary: |
        Opens a supported Messenger dialog from the Facebook Messenger App.
    description: |
        Be sure to check if the device can support this method by calling [canOpenURL](Titanium.Platform.canOpenURL) with "fb-messenger-api://"
        before using this method. If true, you can use this method. If false, the Facebook Messenger application
        is probably not installed in the device.

        Listen for the <Modules.Facebook.shareCompleted> to be notified if the attempt was
        successful or not.
    parameters:
      - name: params
        summary: |
            A dictionary object containing optional parameters.
        type: MessengerDialogParams
    since: "5.4.0"
    platforms: [iphone, ipad]

  - name: presentWebShareDialog
    summary: |
        Opens a web version of the Share dialog (Feed dialog). Does not depend on the Facebook app.
    description: |
        This is a fallback for when Share dialog is not available.

        Listen for the <Modules.Facebook.shareCompleted> to be notified if the attempt was
        successful or not.
    parameters:
      - name: params
        summary: |
            A dictionary object containing optional parameters.
        type: ShareDialogParams
    since: 4.0.0
    deprecated:
        since: 5.0.0
        removed: 5.0.0

  - name: presentSendRequestDialog
    summary: |
        Opens an App Request dialog.
    description: |
        A `requestDialogCompleted` event is generated to indicate if the request attempt was successful or unsuccessful,
        and the resultURL.
    parameters:
      - name: params
        summary: |
            A dictionary object containing parameters.
        type: RequestDialogParams
    since: 4.0.0

  - name: reauthorize
    summary: Makes a request to Facebook for additional permissions.
    deprecated:
        since: 4.0.0
        removed: 4.0.0
    description: |
        iOS 6's facebook login forbids minimum authorization to include write permissions.
        In order to make any write actions, the app must reauthorize asking for the additional
        permissions. If the application already has these permissions, there will be no user
        interaction.
    platforms: [iphone, ipad]
    parameters:
      - name: permissions
        summary: |
            Array of additional permissions to request. For a complete list of permissions, see the
            [official Facebook Permissions Reference](http://developers.facebook.com/docs/reference/api/permissions/)
        type: Array<String>

      - name: audience
        summary: |
            The extent of the visibility write permissions will have. 
            The value of audience should be one of "me", "friends", or "everyone"
        type: String

      - name: callback
        summary: Callback to invoke when the request completes.
        type: Callback<FacebookReauthResponse>

  - name: refreshPermissionsFromServer
    summary: Makes a request to Facebook to get the latest permissions granted.
    description: |
        Facebook now grants total control over granted permissions, and if the user modified the permissions
        outside of your app your cached token may not be updated.

        Listen for the <Modules.Facebook.tokenUpdated> event to be notified if the attempt was
        successful.
    since: 4.0.0

  - name: request
    summary: Makes a request to the legacy Facebook REST API.
    deprecated:
        since: 4.0.0
        removed: 4.0.0
        notes: |
            As of April 30, 2014, Facebook no longer supports its version 1.0 REST API. Use the
            <Modules.Facebook.requestWithGraphPath> method to make Facebook Graph API requests.
    description: |
        For details on API calls and responses, see the
        [offical Facebook REST API documentation](http://developers.facebook.com/docs/reference/rest/).
    parameters:

      - name: method
        summary: The REST API method to call.
        type: String

      - name: params
        summary: |
            A dictionary object for setting parameters required by the call, if any.
        type: Object

      - name: callback
        summary: Callback to invoke  when the request completes.
        type: Callback<FacebookRESTResponse>

  - name: requestWithGraphPath
    summary: Makes a Facebook Graph API request.
    description: |
        If the request requires user authorization, the user must be logged in, and your app
        must be authorized to make the request. You can check the
        [loggedIn](Modules.Facebook.loggedIn) property to determine if the user is logged in.

        Every Facebook object has an associated path. For example, "me" requests information about
        the current user.

        For a complete list of Graph API methods, parameters and return types, see the
        [official Facebook Graph API documentation](https://developers.facebook.com/docs/graph-api).
    parameters:

      - name: path
        summary: Graph API path to request.
        type: String

      - name: params
        summary: |
            A dictionary object for setting parameters required by the call, if any.
        type: Dictionary

      - name: httpMethod
        summary: The HTTP method (GET/POST/DELETE) to use for the call.
        type: String

      - name: callback
        summary: Callback to invoke  when the request completes.
        type: Callback<FacebookGraphResponse>

  - name: requestNewReadPermissions
    summary: Makes a request to Facebook for additional read permissions.
    description: |
        Note that it is not an error for the user to 'Skip' your requested permissions,
        so you should check the module's `permissions` property following the call.
    parameters:

      - name: permissions
        summary: |
            Array of additional permissions to request. For a complete list of permissions, see the
            [official Facebook Permissions Reference](https://developers.facebook.com/docs/facebook-login/permissions/v2.2)
        type: Array<String>

      - name: callback
        summary: Callback to invoke when the request completes.
        type: Callback<FacebookPermissionResponse>
    since: 4.0.0

  - name: requestNewPublishPermissions
    summary: Makes a request to Facebook for additional write permissions.
    description: |
        Note that it is not an error for the user to 'Skip' your requested permissions,
        so you should check the module's `permissions` property following the call.
    parameters:

      - name: permissions
        summary: |
            Array of additional permissions to request. For a complete list of permissions, see the
            [official Facebook Permissions Reference](https://developers.facebook.com/docs/facebook-login/permissions/v2.2)
        type: Array<String>

      - name: audience
        summary: |
            The extent of the visibility write permissions will have.
        type: Number
        constants: Modules.Facebook.AUDIENCE_*

      - name: callback
        summary: Callback to invoke when the request completes.
        type: Callback<FacebookPermissionResponse>
    since: 4.0.0

  - name: fetchDeferredAppLink
    summary: Fetch the deferred app link
    description: Deferred deep linking allows you to send people to a custom view after they installed your app via the app store.
    parameters:

      - name: callback
        summary: Callback to invoke when the request completes.
        type: Callback<FacebookDeferredAppLinkResponse>

    since: "5.4.0"

  - name: shareMediaToMessenger
    summary: Call this method to open Messenger and share an image, animated GIF or video.
    parameter:
      - name: params
        summary: |
            A dictionary object containing required and optional parameters.
        type: ShareToMessengerParams
    since: "5.4.0"
    platforms: [iphone, ipad]

events:

  - name: login
    summary: Fired at session login.
    properties:
      - name: success
        summary: |
            Indicates if the user was logged in successfully.
            Returns `true` if request succeeded, `false` otherwise.
        type: Boolean

      - name: cancelled
        summary: |
            Indicates if the user canceled the login request by closing the dialog.
        type: Number

      - name: error
        summary: |
            Error message, if any returned.
            Will be undefined if `success` is `true`.
        type: String

      - name: code
        summary: |
            Error code.
            Error code will be 0 if `success` is `true`, nonzero otherwise. If the error
            was generated by the operating system, that system's error value is used.
            Otherwise, this value will be -1.
        type: Number

      - name: uid
        summary: User ID returned by Facebook if the login was successful.
        type: String

      - name: data
        summary: |
            Data returned by Facebook when we query for the UID (using graph path "me")
            after a successful login. Data is in JSON format, and includes information
            such as user name, locale and gender.

  - name: logout
    summary: Fired at session logout.

  - name: requestDialogCompleted
    summary: Fired when the Send Request dialog is closed.
    properties:
      - name: success
        summary: |
            Returns `true` if request succeeded, `false` otherwise.
        type: Boolean

      - name: cancelled
        summary: |
            Indicates if the user canceled the request by closing the dialog.
        type: Number

      - name: error
        summary: |
            Error message, if any returned.
            Will be undefined if `success` is `true`.
        type: String

      - name: data
        summary: |
            data returned by Facebook. See Facebook reference for details.
        type: Dictionary
    since: 4.0.2

  - name: shareCompleted
    summary: Fired when the Share dialog or Web Share dialog is closed.
    properties:
      - name: success
        summary: |
            Returns `true` if request succeeded, `false` otherwise.
        type: Boolean

      - name: cancelled
        summary: |
            Indicates if the user canceled the request by closing the dialog.
        type: Number

      - name: error
        summary: |
            Error message, if any returned.
            Will be undefined if `success` is `true`.
        type: String
    since: 4.0.0

  - name: inviteCompleted
    summary: Fired when the Invite dialog is closed.
    properties:
      - name: success
        summary: |
            Returns `true` if request succeeded, `false` otherwise.
        type: Boolean

      - name: cancelled
        summary: |
            Indicates if the user canceled the request by closing the dialog.
        type: Number

      - name: error
        summary: |
            Error message, if any returned.
            Will be undefined if `success` is `true`.
        type: String
    since: 5.4.0

  - name: tokenUpdated
    summary: Fired when [refreshPermissionsFromServer](Modules.Facebook.refreshPermissionsFromServer) is completed.
    since: 4.0.0


properties:
  - name: AUDIENCE_NONE
    summary: Invalid default audience.
    description: |
        Use to set the default audience with either [LoginButton.audience](Modules.Facebook.LoginButton.audience)
        or <Modules.Facebook.requestNewPublishPermissions>.
    type: Number
    permission: read-only
    since: 4.0.0
    deprecated:
        since: "5.0.0"
        removed: "5.0.0"

  - name: AUDIENCE_ONLY_ME
    summary: Published content is only visible to the user.
    description: |
        Use to set the default audience with either [LoginButton.audience](Modules.Facebook.LoginButton.audience)
        or <Modules.Facebook.requestNewPublishPermissions>.
    type: Number
    permission: read-only
    since: 4.0.0

  - name: AUDIENCE_FRIENDS
    summary: Published content is only visible to the user and user's friends.
    description: |
        Use to set the default audience with either [LoginButton.audience](Modules.Facebook.LoginButton.audience)
        or <Modules.Facebook.requestNewPublishPermissions>.
    type: Number
    permission: read-only
    since: 4.0.0

  - name: AUDIENCE_EVERYONE
    summary: Published content is visible to all Facebook users.
    description: |
        Use to set the default audience with either [LoginButton.audience](Modules.Facebook.LoginButton.audience)
        or <Modules.Facebook.requestNewPublishPermissions>.
    type: Number
    permission: read-only
    since: 4.0.0

  - name: ACTION_TYPE_NONE
    summary: No action type.
    description: |
        Use to set the actionType with [presentSendRequestDialog()](Modules.Facebook.presentSendRequestDialog)
    type: Number
    permission: read-only
    since: 5.0.0

  - name: ACTION_TYPE_SEND
    summary: The user is sending an object to the friends.
    description: |
        Use to set the actionType with [presentSendRequestDialog()](Modules.Facebook.presentSendRequestDialog)
    type: Number
    permission: read-only
    since: 5.0.0

  - name: ACTION_TYPE_ASK_FOR
    summary: The user is asking for an object from friends.
    description: |
        Use to set the actionType with [presentSendRequestDialog()](Modules.Facebook.presentSendRequestDialog)
    type: Number
    permission: read-only
    since: 5.0.0

  - name: ACTION_TYPE_TURN
    summary: It is the turn of the friends to play against the user in a match.
    description: |
        Use to set the actionType with [presentSendRequestDialog()](Modules.Facebook.presentSendRequestDialog)
    type: Number
    permission: read-only
    since: 5.0.0

  - name: FILTER_NONE
    summary: No filter all friends can be displayed.
    description: |
        Use to set the filter with [presentSendRequestDialog()](Modules.Facebook.presentSendRequestDialog)
    type: Number
    permission: read-only
    since: 5.0.0

  - name: FILTER_APP_USERS
    summary: Friends using the app can be displayed.
    description: |
        Use to set the filter with [presentSendRequestDialog()](Modules.Facebook.presentSendRequestDialog)
    type: Number
    permission: read-only
    since: 5.0.0

  - name: FILTER_APP_NON_USERS
    summary: Friends not using the app can be displayed.
    description: |
        Use to set the filter with [presentSendRequestDialog()](Modules.Facebook.presentSendRequestDialog)
    type: Number
    permission: read-only
    since: 5.0.0

  - name: BUTTON_STYLE_NORMAL
    summary: |
        Use with [LoginButton.style](Modules.Facebook.LoginButton.style) to specify
        the default login button reading "Connect" or "Login".
    deprecated:
        since: 4.0.0
        removed: 4.0.0
    type: Number
    permission: read-only

  - name: BUTTON_STYLE_WIDE
    summary: |
        Use with [LoginButton.style](Modules.Facebook.LoginButton.style) to specify
        a wide login button reading "Connect with Facebook" or "Login with Facebook".
    deprecated:
        since: 4.0.0
        removed: 4.0.0
    type: Number
    permission: read-only

  - name: LOGIN_BEHAVIOR_BROWSER
    summary: |
        Opens login window in the default Web Browser (Safari/Firefox etc...)
    type: Number
    permission: read-only
    since: "5.4.0"
    platforms: [android, iphone, ipad]

  - name: LOGIN_BEHAVIOR_NATIVE
    summary: |
        Opens login window with the native Facebook app. On iOS it will attempt to
        fallback to <Titanium.Modules.Facebook.LOGIN_BEHAVIOR_BROWSER> if the Facebook app
        is not installed or Facebook chooses it internally. For Android use
        <Titanium.Modules.Facebook.LOGIN_BEHAVIOR_NATIVE_WITH_FALLBACK> to get this behavior.
        
        Note: As of today (Facebook SDK 4.11.0), Facebook seems to not allow logging in using 
        the Facebook app to login, so this constant won't work proper on iOS. This issue is 
        discussed [here](https://developers.facebook.com/bugs/786729821439894/?search_id).
    type: Number
    permission: read-only
    since: "5.4.0"
    platforms: [android, iphone, ipad]

  - name: LOGIN_BEHAVIOR_SYSTEM_ACCOUNT
    summary: |
        Attempts to login with through the Facebook account currently signed in through
        Settings.
    type: Number
    permission: read-only
    since: "5.4.0"
    platforms: [iphone, ipad]

  - name: LOGIN_BEHAVIOR_WEB
    summary: |
        Opens login window through a modal browser window.
    type: Number
    permission: read-only
    since: "5.4.0"
    platforms: [iphone, ipad]

  - name: LOGIN_BEHAVIOR_NATIVE_WITH_FALLBACK
    summary: |
        Opens login window with the native Facebook app. On Android it will attempt to
        fallback to <Titanium.Modules.Facebook.LOGIN_BEHAVIOR_BROWSER> if the Facebook app
        is not installed. For iOS use <Titanium.Modules.Facebook.NATIVE> to get this behavior.
    type: Number
    permission: read-only
    since: "5.4.0"
    platforms: [android]

  - name: LOGIN_BEHAVIOR_DEVICE_AUTH
    summary: |
        Expose Facebook Login for devices such as Android TV and Fire TV.
    type: Number
    permission: read-only
    since: "5.4.0"
    platforms: [android]

  - name: SSO_ONLY
    summary: Only attempt single sign-on.
    description: |
        Use with the [LoginButton.sessionLoginBehavior](Modules.Facebook.LoginButton.sessionLoginBehavior) property.
    type: Number
    permission: read-only
    since: 4.0.0
    platforms: [android]

  - name: LOGIN_BUTTON_TOOLTIP_BEHAVIOR_AUTOMATIC
    summary: |
        The default behavior. The tooltip will only be displayed if the app is eligible 
        (determined by possible server round trip).
    type: Number
    permission: read-only
    since: "6.1.0"
    platforms: [iphone, ipad, android]

  - name: LOGIN_BUTTON_TOOLTIP_BEHAVIOR_FORCE_DISPLAY
    summary: Force display of the tooltip (typically for UI testing).
    type: Number
    permission: read-only
    since: "6.1.0"
    platforms: [iphone, ipad, android]

  - name: LOGIN_BUTTON_TOOLTIP_BEHAVIOR_DISABLE
    summary: |
        Force disable. In this case you can still exert more refined control by manually 
        constructing a new login button.
    type: Number
    permission: read-only
    since: "6.1.0"
    platforms: [iphone, ipad, android]

  - name: LOGIN_BUTTON_TOOLTIP_STYLE_NEUTRAL_GRAY
    summary: Dark gray background, white text, light gray close button.
    type: Number
    permission: read-only
    since: "6.1.0"
    platforms: [iphone, ipad, android]

  - name: LOGIN_BUTTON_TOOLTIP_STYLE_FRIENDLY_BLUE
    summary: Light blue background, white text, faded blue close button.
    type: Number
    permission: read-only
    since: "6.1.0"
    platforms: [iphone, ipad, android]

  - name: SSO_WITH_FALLBACK
    summary: Attempt single sign-on, then fallback to dialog authorization.
    description: |
        Use with the [LoginButton.sessionLoginBehavior](Modules.Facebook.LoginButton.sessionLoginBehavior) property.
    type: Number
    permission: read-only
    since: 4.0.0
    platforms: [android]

  - name: SUPPRESS_SSO
    summary: Do not attempt single sign-on and only use dialog authorization.
    description: |
        Use with the [LoginButton.sessionLoginBehavior](Modules.Facebook.LoginButton.sessionLoginBehavior) property.
    type: Number
    permission: read-only
    since: 4.0.0
    platforms: [android]

  - name: SHARE_DIALOG_MODE_AUTOMATIC
    summary: Acts with the most appropriate mode that is available.
    description: Use with [presentShareDialog()](Modules.Facebook.presentShareDialog).
    type: Number
    permission: read-only
    since: "6.0.0"
    platforms: [iphone, ipad, android]

  - name: SHARE_DIALOG_MODE_NATIVE
    summary: Displays the dialog in the main native Facebook app.
    description: Use with [presentShareDialog()](Modules.Facebook.presentShareDialog).
    type: Number
    permission: read-only
    since: "6.0.0"
    platforms: [iphone, ipad, android]

  - name: SHARE_DIALOG_MODE_SHARE_SHEET
    summary: Displays the dialog in the iOS integrated share sheet.
    description: Use with [presentShareDialog()](Modules.Facebook.presentShareDialog).
    type: Number
    permission: read-only
    since: "6.0.0"
    platforms: [iphone, ipad]

  - name: SHARE_DIALOG_MODE_BROWSER
    summary: Displays the dialog in Safari.
    description: Use with [presentShareDialog()](Modules.Facebook.presentShareDialog).
    type: Number
    permission: read-only
    since: "6.0.0"
    platforms: [iphone, ipad]

  - name: SHARE_DIALOG_MODE_WEB
    summary: Displays the dialog in a web view within the app.
    description: Use with [presentShareDialog()](Modules.Facebook.presentShareDialog).
    type: Number
    permission: read-only
    since: "6.0.0"
    platforms: [iphone, ipad, android]

  - name: SHARE_DIALOG_MODE_FEED_BROWSER
    summary: Displays the feed dialog in Safari.
    description: Use with [presentShareDialog()](Modules.Facebook.presentShareDialog).
    type: Number
    permission: read-only
    since: "6.0.0"
    platforms: [iphone, ipad]

  - name: SHARE_DIALOG_MODE_FEED_WEB
    summary: Displays the feed dialog in a webview within the app.
    description: Use with [presentShareDialog()](Modules.Facebook.presentShareDialog).
    type: Number
    permission: read-only
    since: "6.0.0"
    platforms: [iphone, ipad, android]

  - name: accessToken
    summary: OAuth token set after a successful `authorize`.
    type: String
    permission: read-only

  - name: appid
    summary: Your Facebook application id. You need to set this for anything to work.
    deprecated:
        since: 4.0.0
        removed: 4.0.0
        notes: Set the Facebook App ID in the `tiapp.xml` file.  See "Getting Started" above for details.
    type: String

  - name: canPresentOpenGraphActionDialog
    summary: |
        Checks if the device can support the use of the Facebook Open Graph action dialog from the Facebook App.
    type: Boolean
    since: 4.0.0
    platforms: [android]
    permission: read-only

  - name: canPresentShareDialog
    summary: Checks if the device can support the use of the Facebook Share dialog from the Facebook App.
    type: Boolean
    since: 4.0.0
    permission: read-only
    deprecated:
        since: 5.0.0
        removed: 5.0.0

  - name: expirationDate
    summary: Time at which the `accessToken` expires.
    type: Date
    permission: read-only

  - name: forceDialogAuth
    summary:  |
        Indicates whether the login should use the traditional dialog-based
        authentication.
    deprecated:
        since: 4.0.0
        removed: 4.0.0
    description: |
        Set to `false` to enable Single-Sign-On (SSO) in cases where the official Facebook app is on the
        device.  Default is `true`, meaning the traditional, dialog-based
        authentication is used rather than SSO. See  the
        [Facebook Mobile Guide](http://developers.facebook.com/docs/guides/mobile) for
        details of their Single-Sign-On scheme.

        To use the built-in iOS 6 login, set this property to `false`.
        This property is read-only on Mobile Web.
    type: Boolean
    default: true

  - name: loggedIn
    summary: Indicates if the user is logged in.
    type: Boolean
    permission: read-only

  - name: MESSENGER_BUTTON_MODE_CIRCULAR
    summary: |
        Use with [MessengerButton.mode](Modules.Facebook.MessengerButton.mode) to specify
        the default send button reading "Send".
    description: |
        You can localize the button by localizing "Send" in your strings.xml. Learn more about
        that topic [here](http://docs.appcelerator.com/platform/latest/#!/guide/Internationalization).
    type: Number
    permission: read-only
    since: "5.4.0"
    platforms: [iphone, ipad]

  - name: MESSENGER_BUTTON_MODE_RECTANGULAR
    summary: |
        Use with [MessengerButton.mode](Modules.Facebook.MessengerButton.mode) to specify
        the default send button reading "Send".
    description: |
        You can localize the button by localizing "Send" in your strings.xml. Learn more about
        that topic [here](http://docs.appcelerator.com/platform/latest/#!/guide/Internationalization).
    type: Number
    permission: read-only
    since: "5.4.0"
    platforms: [iphone, ipad]

  - name: MESSENGER_BUTTON_STYLE_BLUE
    summary: |
        Use with [MessengerButton.style](Modules.Facebook.MessengerButton.style) to specify
        the default send button style.
    type: Number
    permission: read-only
    since: "5.4.0"
    platforms: [iphone, ipad]

  - name: MESSENGER_BUTTON_STYLE_WHITE
    summary: |
        Use with [MessengerButton.style](Modules.Facebook.MessengerButton.style) to specify
        the default send button style.
    type: Number
    permission: read-only
    since: "5.4.0"
    platforms: [iphone, ipad]

  - name: MESSENGER_BUTTON_STYLE_WHITE_BORDERED
    summary: |
        Use with [MessengerButton.style](Modules.Facebook.MessengerButton.style) to specify
        the default send button style.
    type: Number
    permission: read-only
    since: "5.4.0"
    platforms: [iphone, ipad]

  - name: loginBehavior
    summary: |
        Defines the behavior that the module will attempt to use for authorize().
    description: |
        Be sure to set this before calling authorize if this is needed. It is
        recommended to follow Facebook's [guidelines](https://developers.facebook.com/blog/post/2015/10/29/Facebook-Login-iOS9)
        for ideal login behavior
    type: Number
    constants: [LOGIN_BEHAVIOR_*]
    default:
        Defaults to <Titanium.Modules.Facebook.LOGIN_BEHAVIOR_NATIVE_WITH_FALLBACK>
        on Android and <Titanium.Modules.Facebook.LOGIN_BEHAVIOR_BROWSER> on iOS
        (which uses the native Safari Dialog internally).
    since: "5.4.0"
    availability: creation
    platforms: [android, iphone, ipad]

  - name: permissions
    summary: Array of permissions to request for your app.
    description: |
        Be sure the permissions you want are set before calling
        [authorize](Modules.Facebook.authorize).

        For a complete list of permissions, see the
        [official Facebook Permissions Reference](https://developers.facebook.com/docs/facebook-login/permissions/v2.2)

        #### iOS Platform Notes

        On iOS, do not request any write permissions before calling the `authorize()` method.  Use the
        [requestNewPublishPermissions()](Modules.Facebook.requestNewPublishPermissions)
        to request write permissions once the user authorizes the application.

        **Prior to Release 4.0.0**

        To use the build-in iOS 6 login, this property cannot contain any of the following:
        offline_access, publish_actions, publish_stream, publish_checkins,
        ads_management, create_event, rsvp_event, manage_friendlists, manage_notifications,
        or manage_pages.
    type: Array<String>

  - name: uid
    summary: Unique user ID returned from Facebook.
    type: String
    permission: read-only

examples:

  - title: Alloy Example
    example: |
        Displays the Facebook Login and Like buttons in a window.

        `app/alloy.js`:

            // Make API calls to Alloy.Globals.Facebook
            Alloy.Globals.Facebook = require('facebook');

        `app/views/index.xml`:

            <Alloy>
                <Window backgroundColor="white">
                    <LoginButton id="fbLogin" module="facebook" top="25" />
                    <LikeButton id="fbLike" module="facebook" top="100" />
                </Window>
            </Alloy>

        `app/controllers/index.js`:

            $.fbLike.objectID = "http://www.facebook.com/appcelerator";
            if (OS_ANDROID) {
                $.index.fbProxy = Alloy.Globals.Facebook.createActivityWorker({lifecycleContainer: $.index});
            }
            $.index.open();

  - title: Authorize
    example: |

        Shows official Facebook dialog for logging in the user and prompting the user to approve your
        requested permissions.  Listen for the module's [login](Modules.Facebook.login) event to
        determine whether the request succeeded.

            var fb = require('facebook');
            fb.addEventListener('login', function(e) {
                if (e.success) {
                    alert('login from uid: '+e.uid+', name: '+ JSON.parse(e.data).name);
                    label.text = 'Logged In = ' + fb.loggedIn;
                }
                else if (e.cancelled) {
                    // user cancelled
                    alert('cancelled');
                }
                else {
                    alert(e.error);
                }
            });
            fb.authorize();

  - title: Logout
    example: |

        Logout the user and forget the authorization token.  The
        [logout](Modules.Facebook.logout) event is fired after the user is logged out.

            fb.addEventListener('logout', function(e) {
                alert('Logged out');
            });
            fb.logout();


  - title: Authorize/Logout Using the Facebook LoginButton
    example: |

        You can use the the native Facebook [LoginButton](Modules.Facebook.LoginButton)
        to allow the user to log in as required. The button updates its state automatically depending
        on whether the user is logged in or not.  When the user is logged in, then the button
        will show "Logout", and vice-versa.

        Note that you don't need to set a click listener or anything else on the button.
        To be notified when the user logs in or out, add event listeners for the
        [login](Modules.Facebook.login) and [logout](Modules.Facebook.logout) events
        provided by the Facebook module, as in the example below.

            // Don't forget to set your requested permissions, else the login button won't be effective.
            var win = Ti.UI.createWindow({backgroundColor: 'white'});
            var fb = require('facebook');

            fb.addEventListener('login', function(e) {
                if (e.success) {
                    alert('Logged in');
                }
            });
            fb.addEventListener('logout', function(e) {
                alert('Logged out');
            });

            if (Ti.Platform.name === 'android') {
                win.fbProxy = fb.createActivityWorker({lifecycleContainer: win});
            }

            // Add the button.  Note that it doesn't need a click event listener.
            win.add(fb.createLoginButton({
                    readPermissions: ['read_stream','email'],
                    top: 50
            }));

            win.open()

  - title: Simple Graph API Call
    example: |

        This example makes a call to the "me" graph path, which represents the current
        user. The JSON results are simply displayed in an alert.  This example assumes
        the user is already logged in. You can check this with <Modules.Facebook.loggedIn>.

            fb.requestWithGraphPath('me', {}, 'GET', function(e) {
                if (e.success) {
                    alert(e.result);
                } else if (e.error) {
                    alert(e.error);
                } else {
                    alert('Unknown response');
                }
            });

  - title: Post a Photo Using the Graph API from the Gallery.
    example: |

        This example posts a photo to the user's account using the Graph API.
        This requires the "publish_actions" permission.

            var B1_TITLE = 'Upload Photo from Gallery with Graph API';
            var b1 = Ti.UI.createButton({
                title:B1_TITLE,
                left: 10, right: 10, top: 0, height: 80
            });

            b1.addEventListener('click', function() {
                Titanium.Media.openPhotoGallery({
                    success:function(event)
                    {
                        b1.title = 'Uploading Photo...';
                        var data = {picture: event.media};
                        // If publish_actions permission is not granted, request it
                        if (fb.permissions.indexOf('publish_actions') < 0) {
                            fb.requestNewPublishPermissions(['publish_actions'], fb.AUDIENCE_FRIENDS, function(e) {
                                if (e.success) {
                                    Ti.API.info('Permissions:'+fb.permissions);
                                    fb.requestWithGraphPath('me/photos', data, "POST", showRequestResult);
                                }
                                if (e.error) {
                                    Ti.API.info('Publish permission error');
                                }
                                if (e.cancelled) {
                                    Ti.API.info('Publish permission cancelled');
                                }
                            });
                        } else {
                            fb.requestWithGraphPath('me/photos', data, "POST", showRequestResult);
                        }
                    },
                    cancel:function()
                    {
                    },
                    error:function(error)
                    {
                    },
                    allowEditing:true
                });
            });

        For more information on posting photos, see:

        * [Photo in the Facebook Graph API Reference](https://developers.facebook.com/docs/graph-api/reference/v2.2/photo)

  - title: Post a Photo Using the Graph API with an image in resources directory
    example: |

        This example posts a photo to the user's account using the Graph API.
        This requires the "publish_actions" permission.

            var b2 = Ti.UI.createButton({
                title: 'Upload Photo from file with Graph API',
                left: 10, 
                right: 10, 
                top: 90, 
                height: 80
            });

            b2.addEventListener('click', function() {
                b2.title = 'Uploading Photo...';
                var f = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, 'images', 'flower.jpg');
                var blob = f.read();
                var data = {
                    caption: 'behold, a flower',
                    picture: blob
                };
                // If publish_actions permission is not granted, request it
                if (fb.permissions.indexOf('publish_actions') < 0) {
                    fb.requestNewPublishPermissions(['publish_actions'], fb.AUDIENCE_FRIENDS, function(e) {
                        if (e.success) {
                            Ti.API.info('Permissions:'+fb.permissions);
                            fb.requestWithGraphPath('me/photos', data, "POST", showRequestResult);
                        }
                        if (e.error) {
                            Ti.API.info('Publish permission error');
                        }
                        if (e.cancelled) {
                            Ti.API.info('Publish permission cancelled');
                        }
                    });
                } else {
                    fb.requestWithGraphPath('me/photos', data, "POST", showRequestResult);
                }
            });

        For more information on posting photos, see:

        * [Photo in the Facebook Graph API Reference](https://developers.facebook.com/docs/graph-api/reference/v2.2/photo)

  - title: Show the Share Dialog
    example: |

        This example shows how to use the Share Dialog.

            var wallDialog = Ti.UI.createButton({
                title: 'Share URL with Share Dialog',
                top: 135, 
                left: 10, 
                right: 10, 
                height: 40
            });

            wallDialog.addEventListener('click', function() {
                if (fb.getCanPresentShareDialog()) {
                    fb.presentShareDialog({
                        link: 'https://appcelerator.com/',
                        name: 'great product',
                        description: 'Titanium is a great product',
                        caption: 'it rocks too',
                        picture: 'http://www.appcelerator.com/wp-content/uploads/scale_triangle1.png'
                    });
                } else {
                    fb.presentWebShareDialog({
                        link: 'https://appcelerator.com/',
                        name: 'great product',
                        description: 'Titanium is a great product',
                        caption: 'it rocks too',
                        picture: 'http://www.appcelerator.com/wp-content/uploads/scale_triangle1.png'
                    });
                }
            });

        For more information on Facebook Dialogs, see:

        * [Facebook Share Dialog Reference](https://developers.facebook.com/docs/sharing/reference/share-dialog)

  - title: Show the Invite Dialog
    example: |

        This example shows how to use the Invite Dialog.

            var wallDialog = Ti.UI.createButton({
                title: 'Invite friends!',
                top: 135, 
                left: 10, 
                right: 10, 
                height: 40
            });

            wallDialog.addEventListener('click', function() {
                FB.presentInviteDialog({
                    appLink: "https://fb.me/xxxxxxxx",
                    appPreviewImageLink: "https://www.mydomain.com/my_invite_image.jpg"
                });
            });

        For more information on Invite Dialogs, see:
        * [Facebook Invite Dialog Reference](https://developers.facebook.com/docs/app-invites/ios)

  - title: Share content to the Facebook Messenger
    example: |

        This example shows how to share images, GIF's and videos to the Facebook messenger.

            var btn = Ti.UI.createButton({
                title: "Share media to messenger"
            });
            btn.addEventListener("click", function(e) {
                var media = [
                    Ti.UI.createView({height: 30,width:30,backgroundColor: "#ff0"}).toImage(), // Image blob
                    Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, "test.gif").read(), // GIF Blob
                    Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, "movie.mp4").read() // Video Blob
                ];

                var options = Ti.UI.createOptionDialog({
                    options: ["Photo", "GIF", "Video", "Cancel"],
                    cancel: 3
                });
                options.addEventListener("click", function(e) {
                    if (e.index == 3) {
                        return;
                    }
                    FB.shareMediaToMessenger({
                        media: media[e.index],
                        metadata: "Ti rocks!",
                        link: "https://appcelerator.com",
                        //renderAsSticker: true // Only for photos e.g. selfies
                    });
                });
                options.show();
            });

        For more information on sharing media to the Facebook Messenger, see:

        * [Facebook Messenger Reference](https://developers.facebook.com/docs/messenger)

  - title: Requesting additional permissions
    example: |

        This example shows how to use the `requestNewPublishPermissions` method to request additional permissions
        to publish a post to the user's wall.

            fb.requestNewPublishPermissions(['publish_actions'], fb.AUDIENCE_FRIENDS, function(e) {
                if (e.success) {
                    fb.requestWithGraphPath('me/feed', null, "POST", showRequestResult);
                } else {
                    Ti.API.debug('Failed authorization due to: ' + e.error);
                }
            });

---
name: FacebookGraphResponse
extends: ErrorResponse
summary: |
    Argument passed to the graph API callback, in response to a
    [requestWithGraphPath](Modules.Facebook.requestWithGraphPath) call.
platforms: [android, iphone, ipad]
since: 3.1.0
properties:
  - name: path
    summary: Graph API path of the original request.
    type: String

  - name: result
    summary: |
        If successful, returns the JSON response returned by Facebook.
        If the request is not successfully completed, the result is undefined.
    type: String

---
name: FacebookPermissionResponse
extends: ErrorResponse
summary: Argument passed to the dialog callback when a dialog is completed or canceled.
description: |
    The `success` and `cancelled` properties may not be reliable for dialogs. In the event
    that the user canceled the dialog, the `result` field is `undefined`.
platforms: [android, iphone, ipad]
since: 4.0.0
properties:
  - name: cancelled
    summary: Indicates if the user canceled the dialog.
    type: Boolean

  - name: success
    summary: |
        Indicates if successful
    type: Boolean

  - name: error
    summary: |
        Error message, if any returned.
        Will be undefined if `success` is `true`.
    type: String

---
name: FacebookReauthResponse
extends: ErrorResponse
summary: Argument passed to the reauthorize callback when the request is completed or canceled.
platforms: [android, iphone, ipad]
since: 3.1.0
deprecated:
    since: 4.0.0
    removed: 4.0.0
properties:
  - name: cancelled
    summary: Indicates if the user canceled the dialog.
    type: Boolean


---
name: FacebookDialogResponse
extends: ErrorResponse
summary: Argument passed to the dialog callback when a dialog is completed or canceled.
platforms: [android, iphone, ipad]
since: 3.1.0
deprecated:
    since: 4.0.0
    removed: 4.0.0
description: |
    The `success` and `cancelled` properties may not be reliable for dialogs. In the event
    that the user canceled the dialog, the `result` field is `undefined`.
properties:
  - name: cancelled
    summary: Indicates if the user canceled the dialog.
    type: Boolean

  - name: result
    summary: |
        If successful, returns the JSON response containing the `post_id` of the new post.
        If the user canceled the dialog, the results is undefined.
    type: String


---
name: FacebookRESTResponse
extends: ErrorResponse
summary: |
    Argument passed to the REST API callback when a request completes (successfully
    or unsuccessfully).
platforms: [android, iphone, ipad]
since: 3.1.0
deprecated:
    since: 4.0.0
    removed: 4.0.0
properties:
  - name: method
    summary: REST method call you specified.
    type: String

  - name: result
    summary: |
        If successful, returns the JSON response returned by Facebook.
        If the request is not successfully completed, the result is undefined.
    type: String

---
name: ShareDialogParams
summary: |
    Optional parameters to pass to either the
    [presentShareDialog()](Modules.Facebook.presentShareDialog) or
    [presentWebShareDialog()](Modules.Facebook.presentWebShareDialog) methods.
since: 4.0.0
platforms: [android, iphone, ipad]
properties:
  - name: caption
    summary: Caption for the link.
    type: String
    deprecated:
        since: "5.0.0"
        removed: "5.0.0"

  - name: description
    summary: Description associated with the link.
    type: String

  - name: link
    summary: URL to share.
    type: String

  - name: name
    summary: Name or title associated with the link.
    type: String
    deprecated:
        since: "5.0.0"
        removed: "5.0.0"

  - name: title
    summary: Title associated with the link.
    type: String
    since: "5.0.0"

  - name: picture
    summary: Link to a thumbnail to associate with the link.
    type: String

  - name: mode
    summary: The mode to select for presenting a share dialog.
    description: |
        The automatic mode will progressively check the availability of different modes and 
        open the most appropriate mode for the dialog that is available.
    type: Number
    optional: true
    default: Modules.Facebook.SHARE_DIALOG_MODE_AUTOMATIC
    constants: Modules.Facebook.SHARE_DIALOG_MODE_*
    since: "6.0.0"

---
name: MessengerDialogParams
summary: |
    Optional parameters to pass to either the
    [presentMessengerDialog()](Modules.Facebook.presentMessengerDialog) method.
since: "5.4.0"
platforms: [iphone, ipad]
properties:
  - name: title
    summary: The title to display for this link.
    description: |
        This value may be discarded for specially handled links (ex: iTunes URLs).
    type: String

  - name: description
    summary: The description of the link.
    description: |
        If not specified, this field is automatically populated by information scraped from the contentURL,
        typically the title of the page. This value may be discarded for specially handled links (ex: iTunes URLs).
    type: String

  - name: link
    summary: URL for the content being shared.
    description: |
        This URL will be checked for all link meta tags for linking in platform specific ways.
        See Facebook documentation for App Links (https://developers.facebook.com/docs/applinks/).
    type: String

  - name: picture
    summary: Link to a thumbnail to associate with the link.
    type: String

  - name: to
    summary: List of IDs for taggable people to tag with this content.
    description: |
        See Facebook documentation for Taggable Friends (https://developers.facebook.com/docs/graph-api/reference/user/taggable_friends)
    type: Array

  - name: placeID
    summary: The ID for a place to tag with this content.
    type: String

  - name: referal
    summary: A value to be added to the referrer URL when a person follows a link from this shared content on feed.
    type: String

---
name: RequestDialogParams
summary: |
    Parameters to pass to [presentSendRequestDialog()](Modules.Facebook.presentSendRequestDialog) method.
since: 4.0.0
platforms: [android, iphone, ipad]
properties:
  - name: message
    summary: Message to send with the request.
    type: String
    optional: false

  - name: title
    summary: Title of request.
    type: String
    optional: true

  - name: to
    summary: Array of pre-selected facebook ids.
    type: Array
    optional: true
    deprecated:
        since: "5.0.0"
        removed: "5.0.0"

  - name: recipients
    summary: Array of pre-selected facebook ids.
    type: Array
    optional: true
    since: "5.0.0"

  - name: recipientSuggestions
    summary: An array of user IDs that will be included in the dialog as the first suggested friends. Cannot be used together with filters.
    type: Array
    optional: true
    since: "5.0.0"

  - name: data
    summary: Additional data to send with the request object.
    type: Dictionary
    optional: true

  - name: actionType
    summary: The nature of the request. Required if objectID is set.
    type: Number
    optional: true
    constants: Modules.Facebook.ACTION_TYPE_*
    since: "5.0.0"

  - name: filters
    summary: The set of friends someone sees if a multi-friend selector is shown.
    type: Number
    constants: Modules.Facebook.FILTER_*
    since: "5.0.0"

  - name: objectID
    summary: The Open Graph object ID of the object being sent. Required if actionType is set.
    type: String
    optional: true
    since: "5.0.0"

---
name: ShareToMessengerParams
summary: |
    Parameters to pass to [shareMediaToMessenger()](Modules.Facebook.shareMediaToMessenger) method.
since: "5.4.0"
platforms: [iphone, ipad]
properties:
  - name: media
    summary: |
        Media to send with the messenger. Allowed media are images, GIF's and videos represented
        as Blobs.
    type: Titanium.Blob
    optional: false

  - name: metadata
    summary: |
        Pass additional information to be sent to Messenger which is sent back to the user's app when
        they reply to an attributed message.
    type: String
    optional: true

  - name: link
    summary: Optional property describing the www source URL of the content.
    description: |
        Setting this property improves performance by allowing Messenger to download the content directly
        rather than uploading the content from your app. This option is only used for animated GIFs.
    type: String
    optional: true

  - name: renderAsSticker
    summary: Optional property describing whether the content should be rendered like a sticker.
    description: |
        Setting this property informs Messenger that the media content should be rendered as a sticker.
        This option is only used for static images.
    type: Boolean
    default: false
    optional: true

---
name: InviteDialogParams
summary: |
    Parameters to pass to [presentInviteDialog()](Modules.Facebook.presentInviteDialog) method.
since: "5.4.0"
platforms: [iphone, ipad, android]
properties:
  - name: appLink
    summary: An app link target that will be used as a target when the user accept the invite.
    description: |
        This is a requirement. You can find out more about app links [here](https://developers.facebook.com/docs/applinks).
    type: String
    optional: false

  - name: appPreviewImageLink
    summary: A URL to a preview image that will be displayed with the app invite
    description: This is optional. If you don't include it a fallback image will be used.
    type: String
    optional: true 

---
name: FacebookDeferredAppLinkResponse
summary: Object returned from the [fetchDeferredAppLink()](Modules.Facebook.fetchDeferredAppLink) method
platforms: [android, iphone, ipad]
since: "5.4.0"
properties:
  - name: url
    summary: The URL returned from the server.
    type: String

  - name: success
    summary: Indicates if the response has succeded and the response contain a URL.
    type: Boolean

  - name: error
    summary: A string that contain the error.
    type: String
    optional: true
